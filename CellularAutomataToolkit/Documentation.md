
### HexagonalCellularAutomata Documentation:

---

### 1\. HexagonalGraphGen

```wolfram
HexagonalGraphGen[n_, m_]
```

**Description:**  
Generates a hexagonal graph with dimensions n x m.

**Parameters:**

*   `n` : The number of hexagonal cells in the horizontal direction.
*   `m` : The number of hexagonal cells in the vertical direction.

**Returns:**  
A `Graph` object representing the hexagonal graph.

---

### 2\. InitializeCellularAutomata

```wolfram
InitializeCellularAutomata[geoPosition_, geoRange_, nodeDensity_, waterLevelFunction_]
```

**Description:**  
Initializes the cellular automata based on a given geographical position, range, node density, and water level function.

**Parameters:**

*   `geoPosition` : The geographical position (latitude, longitude) around which the hexagonal graph is centered.
*   `geoRange` : The geographical range (in km) that determines the extent of the hexagonal graph. This is the width of the square that the geographical data is taken from
*   `nodeDensity` : The desired density of the nodes in the hexagonal graph, measured in nodes per square km
*   `waterLevelFunction` : A function of position or number that defines the initial water level for each vertex. Water level is the thickness of water above the surface, not the total height of water above sea level.

**Returns:**  
A `Graph` object representing the initialized hexagonal graph with water and elevation data. (Although the funciton primarily updates internal datastructures)

---

### 3\. InitVertexData

```wolfram
InitVertexData[graph_, groundHeightFunction_, waterLevelFunction_]
```

**Description:**  
Initializes the vertex data (ground height and water level) for a given hexagonal graph.

**Parameters:**

*   `graph` : The graph for which vertex data is to be initialized.
*   `groundHeightFunction` : A function to determine the ground height of each vertex.
*   `waterLevelFunction` : A function or number to determine the initial water level of each vertex. Water level is the thickness of water above the surface, not the total height of water above sea level.

**Returns:**  
No return value. This function updates interal data representations for the given graph.

---

### 4\. VisualizeWaterData

```wolfram
VisualizeWaterData[graph_, vertexData_]
VisualizeWaterData[graph_, vertexData_, waterLevelSizeWeight_, groundLevelSizeWeight_]
```

**Description:**  
Provides a visualization of water data for a given hexagonal graph.

**Parameters:**

*   `graph` : The hexagonal graph.
*   `vertexData` : The data associated with each vertex (including ground height and water level).
*   `waterLevelScale` (optional): A scale factor to adjust the size visualization of the water level.
*   `groundHeightScale` (optional): A scale factor to adjust the size visualization of the ground height.

**Returns:**  
A visualization of the graph with vertices sized according to the water level and ground height.

---

### 5\. VisualizeWaterData3D

```wolfram
VisualizeWaterData3D[graph_, vertexData_]
VisualizeWaterData3D[graph_, vertexData_, waterLevelScale_, groundHeightScale_]
```

**Description:**  
Provides a 3D visualization of water data for a given hexagonal graph.

**Parameters:**

*   `graph` : The hexagonal graph.
*   `vertexData` : The data associated with each vertex (including ground height and water level). This data should have been generated by the `GenerateWaterData` function.
*   `waterLevelScale` (optional): A scale factor to adjust the 3D visualization of the water level.
*   `groundHeightScale` (optional): A scale factor to adjust the 3D visualization of the ground height.

**Returns:**  
A 3D visualization of the graph showing ground heights and water levels.

---

### 6\. GenerateWaterData

```wolfram
GenerateWaterData[graph_, iterations_, flowRate_]
```

**Description:**  
Simulates the cellular automata for a given number of iterations and returns the water data.

**Parameters:**

*   `graph` : The hexagonal graph.
*   `iterations` : The number of iterations to run the cellular automata.
*   `flowRate` : The rate at which water flows between adjacent vertices. Number from 0 to 1. Recommended value 0.9

**Returns:**  
A list of `vertexData` for each iteration. These can be used for analysis or visualization

---

### Internal (Private) Functions:

1.  `NearestHexPoints`
    *   Finds the nearest hex points to a given point based on specified coordinates.
2.  `CalculateNeighborhoodNewWaterLevels`
    *   Calculates the new water levels for a vertex's neighborhood based on flow rate and current water levels.
3.  `CalculateGraphNewWaterLevels`
    *   Computes new water levels for all vertices in the graph.
4.  `UpdateGraphWaterLevels`
    *   Updates the water levels of all vertices in the graph based on computed drainage amounts.
5.  `FullUpdateGraph`
    *   Executes a full update on the graph, calculating new water levels and then updating them.

---
